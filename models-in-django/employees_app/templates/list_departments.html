<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>List of Departments</title>
</head>
<body>
<h1>List of Departments</h1>
<ul>
    {% for department in departments %}
        <li>{{ department.name }}

            <ul>
            <!-- Generates employees per department based on foreign key
             this is also known as n+1 query problem (too many queries)-->
                {% for employee in department.employee_set.all %}
                    <li>{{ employee.first_name }}</li>
                {% endfor %}
            </ul>
        </li>
    {% endfor %}
</ul>
<hr>
<ul>
    {% for employee in employees %}
        <li>{{ employee.first_name }} ({{ employee.department.name }})</li>
    {% endfor %}
</ul>
</body>
</html>